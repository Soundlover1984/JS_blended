!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r),r("8MQwU"),r("2Jsp0"),r("e87ry"),r("23Ajj"),r("jqGQW");var c=r("bpxeT"),a=r("2TvXO"),s=r("6JpON"),i=r("8MQwU"),l=(c=r("bpxeT"),a=r("2TvXO"),s=r("6JpON"),i=r("8MQwU"),r("2Jsp0")),u=r("jklOU"),d=r("l1Gdk"),f=document.querySelector(".main__title-js"),p=document.querySelector(".main__list-js"),g=window.innerWidth,m=0,_=0,h=0,v=new(0,u.Spiner);window.addEventListener("resize",e(d)((function(e){var t=e.target.outerWidth;(t>767&&g<768||t>1439&&g<1440||t<1440&&g>1439||t<768&&g>767)&&location.reload()}),50));var y=function(t){0!==t.length||e(s).Notify.failure("Sorry, there was an error on the server. Please try again.")},k=function(e){return e.map((function(e){return"\n           <li class='all-categories__item'>\n           <p class='category-books__title'>".concat(e.list_name,"</p>\n            <ul class='category-books__list-js card-set'>\n           ").concat(b(e.books),'\n           </ul>\n           <button class="load-more-js" type="button" data-category="').concat(e.list_name,'">see more</button>\n           </li>\n      ')})).join("")},b=function(e){return O(e).map((function(e){return"\n      <li class='category-books__item'>\n       <a href=\"/\" class='category-books__link'>\n        <img\n          class='category-books__img'\n          src='".concat(e.book_image,"'\n          alt='book'\n          data-id=\"").concat(e._id,"\"\n         loading=\"lazy\"\n        />\n        <div class='category-books__wrapper'>\n        <p class='category-books__text'>quick view</p>\n        </div>\n        </a>\n        <h3 class='category-books__name' >").concat(T(e.title,17),"</h3>\n        <p class='category-books__author'>").concat(T(e.author,29),"</p>\n      </li>\n    ")})).join("")};function w(){return(w=e(c)(e(a).mark((function t(){var n,o,r;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v.show(),e.next=4,i.fetchBooks.getBestSellers();case 4:n=e.sent,y(n),p.innerHTML=k(n),o=document.querySelectorAll(".load-more-js"),r=document.querySelectorAll(".category-books__item"),q(r),E(o),v.hide(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),v.hide();case 18:case"end":return e.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}var j=function(){f.innerHTML=' Best Sellers <span class="main__title--color-purple">Books</span>',function(){w.apply(this,arguments)}()},L=function(e){e.preventDefault(),_=e.target.dataset.id,"IMG"===e.target.nodeName&&(0,l.handleModalWindow)(_)},x=function(){document.documentElement.scrollTop=g<768?736:g>=768&&g<1440?650:0},S=function(e){h=e.target.dataset.category,M(h),Q(h),x()},T=function(e,t){return e.length>t?"".concat(e.slice(0,t),"..."):e},q=function(e){e.forEach((function(e){e.addEventListener("click",L)}))},E=function(e){e.forEach((function(e){e.addEventListener("click",S)}))},M=function(e){for(var t=document.querySelector(".categories-list-js").children,n=0;n<t.length;n+=1){var o=t[n];o.firstElementChild.classList.remove("selected-categories"),o.textContent.trim()===e.trim()&&o.firstElementChild.classList.add("selected-categories")}},O=function(e){return 1===m?e.splice(1,4):3===m&&e.splice(3,2),e};m=g<768?1:g>=768&&g<1440?3:5,j();u=r("jklOU");var B=document.querySelector(".categories-list-js"),C=document.querySelector(".main__list-js"),N=document.querySelector(".main__title-js"),U=document.querySelector(".all-categories-btn"),W="";U.classList.add("selected-categories");var A,H=new(0,u.Spiner),J=(A=e(c)(e(a).mark((function t(){var n,o;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.fetchBooks.getCategoriesList();case 3:n=e.sent,o=n.map((function(e){return"<li class= 'categories-list__item '> <button class= 'categories-list__button'>".concat(e.list_name,"</button> </li>")})).join(""),B.insertAdjacentHTML("beforeend",o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])}))),function(){return A.apply(this,arguments)});J();var Q=function(){var t=e(c)(e(a).mark((function t(n){var o,r,c,s,l,u;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.show(),e.next=3,i.fetchBooks.getBooksByCategory(n);case 3:o=e.sent,r=b(o),c=n.split(" "),s=c.slice(0,c.length-1).join(" "),l=c.slice(c.length-1).join(),N.innerHTML="".concat(s,'<span class="main__title--color-purple"> ').concat(l,"</span>"),C.innerHTML=r,C.classList.add("card-set"),u=document.querySelectorAll(".category-books__item"),q(u),U.classList.remove("selected-categories"),H.hide();case 15:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();B.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(D(),e.target===U)return U.classList.add("selected-categories"),void j();W=e.target.textContent,Q(W),e.target.classList.add("selected-categories"),x()}));var D=function(){for(var e=0;e<B.children.length;e+=1){B.children[e].firstElementChild.classList.remove("selected-categories")}};r("dgWtE"),r("bWgPh"),r("cO4lv")}();
//# sourceMappingURL=index.23ec6c0b.js.map
