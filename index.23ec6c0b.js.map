{"mappings":"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","sources":["src/index.js","src/js/side-bar/categories.js","src/js/home/homeCategories.js"],"sourcesContent":["import './js/fetchBooks';\nimport './js/modals/modal';\nimport './js/modals/auth-modal';\nimport './js/scroll-up';\nimport './js/dark-theme/darkTheme';\nimport './js/side-bar/categories';\nimport './js/home/homeCategories';\nimport './js/support/support';\nimport './js/header/header';\nimport './js/firebase/auth';\n","import Notiflix from 'notiflix';\nimport { fetchBooks } from '../fetchBooks';\nimport { makeMarkupGategory, showAllCategories } from '../home/homeCategories';\nimport { addEventListenerForBook } from '../home/homeCategories';\nimport { addEventListenerForBook } from '../home/homeCategories';\nimport { showAllCategories } from '../home/homeCategories';\nimport { Spiner } from '../spiner-loader';\nimport { currentDocumentScroll } from '../home/homeCategories';\n\nconst listEl = document.querySelector('.categories-list-js');\nconst mainListEl = document.querySelector('.main__list-js');\nconst mainTitle = document.querySelector('.main__title-js');\nconst allCategoriesBtn = document.querySelector('.all-categories-btn');\nlet title = '';\n\nallCategoriesBtn.classList.add('selected-categories');\n\nconst spiner = new Spiner();\n\nconst createCategoryList = async () => {\n  try {\n    const categoriesList = await fetchBooks.getCategoriesList();\n\n    const makeNewButtons = categoriesList\n      .map(\n        category =>\n          `<li class= 'categories-list__item '> <button class= 'categories-list__button'>${category.list_name}</button> </li>`\n      )\n      .join('');\n    listEl.insertAdjacentHTML('beforeend', makeNewButtons);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\ncreateCategoryList();\n\nconst validationQuery = query => {\n  if (query.length === 0) {\n    Notiflix.Notify.failure(\n      'Sorry, there was an error on the server. Please try again.'\n    );\n    return;\n  }\n};\n\nexport const drawCategory = async name => {\n  spiner.show();\n\n  const books = await fetchBooks.getBooksByCategory(name);\n  const markup = makeMarkupGategory(books);\n  const titleArr = name.split(' ');\n  const titleFirstPart = titleArr.slice(0, titleArr.length - 1).join(' ');\n  const titleLastPart = titleArr.slice(titleArr.length - 1).join();\n  mainTitle.innerHTML = `${titleFirstPart}<span class=\"main__title--color-purple\"> ${titleLastPart}</span>`;\n  mainListEl.innerHTML = markup;\n  mainListEl.classList.add('card-set');\n  const bookCategoryEl = document.querySelectorAll('.category-books__item');\n  addEventListenerForBook(bookCategoryEl);\n  allCategoriesBtn.classList.remove('selected-categories');\n\n  spiner.hide();\n};\n\nlistEl.addEventListener('click', markup);\n\nfunction markup(ev) {\n  if (ev.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  clearSelectedCategories();\n\n  if (ev.target === allCategoriesBtn) {\n    allCategoriesBtn.classList.add('selected-categories');\n    showAllCategories();\n    return;\n  }\n  title = ev.target.textContent;\n  drawCategory(title);\n  ev.target.classList.add('selected-categories');\n  currentDocumentScroll();\n}\n\nconst clearSelectedCategories = () => {\n  for (let i = 0; i < listEl.children.length; i += 1) {\n    const category = listEl.children[i];\n\n    category.firstElementChild.classList.remove('selected-categories');\n  }\n};\n","import Notiflix from 'notiflix';\nimport { fetchBooks } from '../fetchBooks';\nimport { handleModalWindow } from '../modals/modal';\nimport { drawCategory } from '../side-bar/categories';\nimport { Spiner } from '../spiner-loader';\nimport debounce from 'lodash.debounce';\n\nconst mainTitleEl = document.querySelector('.main__title-js');\nconst mainWraperEl = document.querySelector('.main__list-js');\nlet currentRenderWidth = window.innerWidth;\nlet amountRenderBooks = 0;\nlet idBook = 0;\nlet title = 0;\n\nconst spiner = new Spiner();\n\nwindow.addEventListener('resize', debounce(handleWindowResize, 50));\n\n\nfunction handleWindowResize(event) {\n  const width = event.target.outerWidth;\n\n  if (\n    (width > 767 && currentRenderWidth < 768) ||\n    (width > 1439 && currentRenderWidth < 1440) ||\n    (width < 1440 && currentRenderWidth > 1439) ||\n    (width < 768 && currentRenderWidth > 767)\n  ) {\n    location.reload();\n  }\n}\n\n\nconst currentWindowWidth = () => {\n  if (currentRenderWidth < 768) {\n    amountRenderBooks = 1;\n  } else if (currentRenderWidth >= 768 && currentRenderWidth < 1440) {\n    amountRenderBooks = 3;\n  } else {\n    amountRenderBooks = 5;\n  }\n};\n\n\nconst validationQuery = query => {\n  if (query.length === 0) {\n    Notiflix.Notify.failure(\n      'Sorry, there was an error on the server. Please try again.'\n    );\n    return;\n  }\n};\n\n\nconst makeMarkupAllCategories = categories => {\n  return categories\n    .map(category => {\n      return `\n           <li class='all-categories__item'>\n           <p class='category-books__title'>${category.list_name}</p>\n            <ul class='category-books__list-js card-set'>\n           ${makeMarkupGategory(category.books)}\n           </ul>\n           <button class=\"load-more-js\" type=\"button\" data-category=\"${\n             category.list_name\n           }\">see more</button>\n           </li>\n      `;\n    })\n    .join('');\n};\n\n\nexport const makeMarkupGategory = category => {\n  return trimArrayBooks(category)\n    .map(book => {\n      return `\n      <li class='category-books__item'>\n       <a href=\"/\" class='category-books__link'>\n        <img\n          class='category-books__img'\n          src='${book.book_image}'\n          alt='book'\n          data-id=\"${book._id}\"\n         loading=\"lazy\"\n        />\n        <div class='category-books__wrapper'>\n        <p class='category-books__text'>quick view</p>\n        </div>\n        </a>\n        <h3 class='category-books__name' >${checkLengthBookTitle(\n          book.title,\n          17\n        )}</h3>\n        <p class='category-books__author'>${checkLengthBookTitle(\n          book.author,\n          29\n        )}</p>\n      </li>\n    `;\n    })\n    .join('');\n};\n\n\nasync function feachAllCategories() {\n  try {\n    spiner.show();\n\n    const categories = await fetchBooks.getBestSellers();\n    validationQuery(categories);\n    mainWraperEl.innerHTML = makeMarkupAllCategories(categories);\n\n    const seeMoreBtnEl = document.querySelectorAll('.load-more-js');\n    const bookCategoryEl = document.querySelectorAll('.category-books__item');\n\n    addEventListenerForBook(bookCategoryEl);\n    addEventListenerForBtn(seeMoreBtnEl);\n\n    spiner.hide();\n  } catch (error) {\n    console.log(error);\n    spiner.hide();\n  }\n}\n\n\nexport const showAllCategories = () => {\n  mainTitleEl.innerHTML =\n    ' Best Sellers <span class=\"main__title--color-purple\">Books</span>';\n  feachAllCategories();\n};\n\n\n\nconst handleImgClick = event => {\n  event.preventDefault();\n  idBook = event.target.dataset.id;\n\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  handleModalWindow(idBook);\n};\n\n\nexport const currentDocumentScroll = () => {\n  if (currentRenderWidth < 768) {\n    document.documentElement.scrollTop = 736;\n  } else if (currentRenderWidth >= 768 && currentRenderWidth < 1440) {\n    document.documentElement.scrollTop = 650;\n  } else {\n    document.documentElement.scrollTop = 0;\n  }\n};\n\n\nconst handleSeeMoreBtnClick = event => {\n  title = event.target.dataset.category;\n\n  setCurrentCategory(title);\n  drawCategory(title);\n  currentDocumentScroll();\n};\n\n\nexport const checkLengthBookTitle = (title, length) => {\n  if (title.length > length) {\n    return `${title.slice(0, length)}...`;\n  }\n\n  return title;\n};\n\nexport const addEventListenerForBook = book => {\n  book.forEach(el => {\n    el.addEventListener('click', handleImgClick);\n  });\n};\n\nconst addEventListenerForBtn = category => {\n  category.forEach(el => {\n    el.addEventListener('click', handleSeeMoreBtnClick);\n  });\n};\n\nconst setCurrentCategory = title => {\n  const categoriesListChildren = document.querySelector(\n    '.categories-list-js'\n  ).children;\n  for (let i = 0; i < categoriesListChildren.length; i += 1) {\n    const category = categoriesListChildren[i];\n\n    category.firstElementChild.classList.remove('selected-categories');\n\n    if (category.textContent.trim() === title.trim()) {\n      category.firstElementChild.classList.add('selected-categories');\n    }\n  }\n};\n\nconst trimArrayBooks = category => {\n  if (amountRenderBooks === 1) {\n    category.splice(1, 4);\n  } else if (amountRenderBooks === 3) {\n    category.splice(3, 2);\n  } else {\n    category;\n  }\n  return category;\n};\n\ncurrentWindowWidth();\nshowAllCategories();\n"],"names":["parcelRequire","$bpxeT","$e46e738bffeef782$var$mainTitleEl","document","querySelector","$e46e738bffeef782$var$mainWraperEl","$e46e738bffeef782$var$currentRenderWidth","window","innerWidth","$e46e738bffeef782$var$amountRenderBooks","$e46e738bffeef782$var$idBook","$e46e738bffeef782$var$title","$e46e738bffeef782$var$spiner","$jklOU","Spiner","addEventListener","$parcel$interopDefault","$l1Gdk","event","width","target","outerWidth","location","reload","$e46e738bffeef782$var$validationQuery","query","length","$6JpON","Notify","failure","$e46e738bffeef782$var$makeMarkupAllCategories","categories","map","category","concat","list_name","$e46e738bffeef782$export$93242e041943582c","books","join","$e46e738bffeef782$var$trimArrayBooks","book","book_image","_id","$e46e738bffeef782$export$d0b4285b56c56ded","title","author","$e46e738bffeef782$var$_feachAllCategories","$2TvXO","mark","_callee","seeMoreBtnEl","bookCategoryEl","show","$8MQwU","fetchBooks","getBestSellers","_ctx","sent","innerHTML","querySelectorAll","$e46e738bffeef782$export$86c97e2bc749f2cb","$e46e738bffeef782$var$addEventListenerForBtn","hide","console","log","t0","apply","this","arguments","$e46e738bffeef782$export$19ae0cb1595596b","$e46e738bffeef782$var$feachAllCategories","$e46e738bffeef782$var$handleImgClick","preventDefault","dataset","id","nodeName","$2Jsp0","handleModalWindow","$e46e738bffeef782$export$bc8835e6fd408586","documentElement","scrollTop","$e46e738bffeef782$var$handleSeeMoreBtnClick","$e46e738bffeef782$var$setCurrentCategory","$2ccbe99338e96cd8$export$289350b6fddd83e8","title1","slice","forEach","el","title2","categoriesListChildren","children","i","firstElementChild","classList","remove","textContent","trim","add","splice","$2ccbe99338e96cd8$var$listEl","$2ccbe99338e96cd8$var$mainListEl","$2ccbe99338e96cd8$var$mainTitle","$2ccbe99338e96cd8$var$allCategoriesBtn","$2ccbe99338e96cd8$var$title","$2ccbe99338e96cd8$var$spiner","$2ccbe99338e96cd8$var$createCategoryList","categoriesList","makeNewButtons","getCategoriesList","insertAdjacentHTML","name","_$markup","titleArr","titleFirstPart","titleLastPart","getBooksByCategory","split","ev","$2ccbe99338e96cd8$var$clearSelectedCategories"],"version":3,"file":"index.23ec6c0b.js.map"}