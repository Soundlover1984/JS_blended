!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o("eQllq"),o("2Jsp0"),o("e87ry"),o("gOyL5"),o("jqGQW");var c=o("bpxeT"),a=o("2TvXO"),s=o("6JpON"),i=o("eQllq"),l=(c=o("bpxeT"),a=o("2TvXO"),s=o("6JpON"),i=o("eQllq"),o("2Jsp0")),u=o("2rBVR"),d=o("l1Gdk"),f=document.querySelector(".main__title-js"),p=document.querySelector(".main__list-js"),g=window.innerWidth,m=0,_=0,h=0,v=new(0,u.Spiner);window.addEventListener("resize",e(d)((function(e){var t=e.target.outerWidth;(t>767&&g<768||t>1439&&g<1440||t<1440&&g>1439||t<768&&g>767)&&location.reload()}),50));var y=function(t){0!==t.length||e(s).Notify.failure("Sorry, there was an error on the server. Please try again.")},b=function(e){return e.map((function(e){return"\n           <li class='all-categories__item'>\n           <p class='category-books__title'>".concat(e.list_name,"</p>\n            <ul class='category-books__list-js card-set'>\n           ").concat(k(e.books),'\n           </ul>\n           <button class="load-more-js" type="button" data-category="').concat(e.list_name,'">see more</button>\n           </li>\n      ')})).join("")},k=function(e){return O(e).map((function(e){return"\n      <li class='category-books__item'>\n       <a href=\"/\" class='category-books__link'>\n        <img\n          class='category-books__img'\n          src='".concat(e.book_image,"'\n          alt='book'\n          data-id=\"").concat(e._id,"\"\n         loading=\"lazy\"\n        />\n        <div class='category-books__wrapper'>\n        <p class='category-books__text'>quick view</p>\n        </div>\n        </a>\n        <h3 class='category-books__name' >").concat(S(e.title,17),"</h3>\n        <p class='category-books__author'>").concat(S(e.author,29),"</p>\n      </li>\n    ")})).join("")};function w(){return(w=e(c)(e(a).mark((function t(){var n,r,o;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v.show(),e.next=4,i.fetchBooks.getBestSellers();case 4:n=e.sent,y(n),p.innerHTML=b(n),r=document.querySelectorAll(".load-more-js"),o=document.querySelectorAll(".category-books__item"),T(o),E(r),v.hide(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),v.hide();case 18:case"end":return e.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}var L=function(){f.innerHTML=' Best Sellers <span class="main__title--color-purple">Books</span>',function(){w.apply(this,arguments)}()},x=function(e){e.preventDefault(),_=e.target.dataset.id,"IMG"===e.target.nodeName&&(0,l.handleModalWindow)(_)},q=function(){document.documentElement.scrollTop=g<768?736:g>=768&&g<1440?650:0},j=function(e){h=e.target.dataset.category,B(h),R(h),q()},S=function(e,t){return e.length>t?"".concat(e.slice(0,t),"..."):e},T=function(e){e.forEach((function(e){e.addEventListener("click",x)}))},E=function(e){e.forEach((function(e){e.addEventListener("click",j)}))},B=function(e){for(var t=document.querySelector(".categories-list-js").children,n=0;n<t.length;n+=1){var r=t[n];r.firstElementChild.classList.remove("selected-categories"),r.textContent.trim()===e.trim()&&r.firstElementChild.classList.add("selected-categories")}},O=function(e){return 1===m?e.splice(1,4):3===m&&e.splice(3,2),e};m=g<768?1:g>=768&&g<1440?3:5,L();u=o("2rBVR");var M=document.querySelector(".categories-list-js"),C=document.querySelector(".main__list-js"),N=document.querySelector(".main__title-js"),W=document.querySelector(".all-categories-btn"),H="";W.classList.add("selected-categories");var A,J=new(0,u.Spiner),Q=(A=e(c)(e(a).mark((function t(){var n,r;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.fetchBooks.getCategoriesList();case 3:n=e.sent,r=n.map((function(e){return"<li class= 'categories-list__item '> <button class= 'categories-list__button'>".concat(e.list_name,"</button> </li>")})).join(""),M.insertAdjacentHTML("beforeend",r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])}))),function(){return A.apply(this,arguments)});Q();var R=function(){var t=e(c)(e(a).mark((function t(n){var r,o,c,s,l,u;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J.show(),e.next=3,i.fetchBooks.getBooksByCategory(n);case 3:r=e.sent,o=k(r),c=n.split(" "),s=c.slice(0,c.length-1).join(" "),l=c.slice(c.length-1).join(),N.innerHTML="".concat(s,'<span class="main__title--color-purple"> ').concat(l,"</span>"),C.innerHTML=o,C.classList.add("card-set"),u=document.querySelectorAll(".category-books__item"),T(u),W.classList.remove("selected-categories"),J.hide();case 15:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();M.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(D(),e.target===W)return W.classList.add("selected-categories"),void L();H=e.target.textContent,R(H),e.target.classList.add("selected-categories"),q()}));var D=function(){for(var e=0;e<M.children.length;e+=1){M.children[e].firstElementChild.classList.remove("selected-categories")}};o("dgWtE"),o("bWgPh"),o("cO4lv")}();
//# sourceMappingURL=index.3ce21410.js.map
